---
title: "Pandemic Prepared-ness and Covid-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
```{r load-data}
covid_data <- read.csv("https://wzb-ipi.github.io/corona/df_full.csv"
)

covid_data
```
```{r libraries}
library(tidyverse)
library(glue)
library(lubridate)
library(rms)
```

```{r modify-dates}
covid_data <- covid_data %>%
  mutate(
    dates = ymd(glue("{year} {month} {day}"))
  )
```
```{r plot-pan-prep}
covid_data %>%
  filter(date == "2020-11-30") %>%
  ggplot(covid_data, mapping = aes(x = pandemic_prep, y = deaths_cum_per_million)) +
  geom_point() +
  geom_smooth() + 
  labs(title = "Relationship between Pandemic Preparedness and Deaths Per Million", 
       x = "Pandemic Preparedness", 
       y = "Cumulative Deaths per Million")

covid_data %>%
  filter(date == "2020-11-30") %>%
  ggplot(covid_data, mapping = aes(x = pandemic_prep, y = deaths_cum_per_million, color = gdp_pc)) +
  scale_color_viridis_c() +
  geom_point() +
  geom_smooth() + 
  labs(title = "Relationship between Pandemic Preparedness and Deaths Per Million", 
       x = "Pandemic Preparedness", 
       y = "Cumulative Deaths per Million")

covid_data %>%
  filter(date == "2020-11-30") %>%
  ggplot(covid_data, mapping = aes(x = pandemic_prep, y = deaths_cum_per_million, color = air_travel)) +
  scale_color_viridis_c() +
  geom_point() +
  geom_smooth() + 
  labs(title = "Relationship between Pandemic Preparedness and Deaths Per Million", 
       x = "Pandemic Preparedness", 
       y = "Cumulative Deaths per Million")
```
```{r plot-gdp-air-travel}
covid_data %>%
  filter(date == "2020-11-30") %>%
  ggplot(covid_data, mapping = aes(x = gdp_pc, y = air_travel)) +
  geom_point() +
  geom_smooth() +
  labs(title = "Relationship between GDP per Capita and Air Travel",
       y = "Air Travel", 
       x = "GDP per Capita")
```

```{r plot-combined}
covid_data %>%
  filter(date == "2020-11-30") %>%
  ggplot(covid_data, mapping = aes(x = pandemic_prep, y = deaths_cum_per_million, color = gdp_pc, alpha = air_travel)) +
  scale_color_viridis_c() +
  geom_point() +
  geom_smooth() + 
  labs(title = "Relationship between Pandemic Preparedness and Deaths Per Million", 
       x = "Pandemic Preparedness", 
       y = "Cumulative Deaths per Million") +
  theme_minimal()
```
```{r plot-pan-prep-region}
covid_data %>%
  filter(date == "2020-11-30") %>%
  ggplot(covid_data, mapping = aes(x = pandemic_prep, y = deaths_cum_per_million)) +
  geom_point() +
  geom_smooth() + 
  labs(title = "Relationship between Pandemic Preparedness and Deaths Per Million", 
       x = "Pandemic Preparedness", 
       y = "Cumulative Deaths per Million")+
  facet_wrap(~continent)

covid_data %>%
  filter(date == "2020-11-30") %>%
  ggplot(covid_data, mapping = aes(x = pandemic_prep, y = deaths_cum_per_million, color = gdp_pc)) +
  scale_color_viridis_c() +
  geom_point() +
  geom_smooth() + 
  labs(title = "Relationship between Pandemic Preparedness and Deaths Per Million", 
       x = "Pandemic Preparedness", 
       y = "Cumulative Deaths per Million")+
  facet_wrap(~continent)

```

